jQuery(function(h){"use strict";var t={getAddonOptions:function(){var a={security:wc_pao_params.nonce.get_addon_options,action:"wc_pao_get_addon_options"};return h.ajax({type:"POST",data:a,url:wc_pao_params.ajax_url})},getAddonField:function(a,o){a={security:wc_pao_params.nonce.get_addon_field,action:"wc_pao_get_addon_field",field_type:a,addon:o};return h.ajax({type:"POST",data:a,url:wc_pao_params.ajax_url})},getBlockParams:function(){return{message:null,overlayCSS:{background:"#fff",opacity:.6}}},refresh:function(){var a=h(".wc-pao-addon").length,o=h("#product_addons_data select.addon_field_type");0<a?(h(".wc-pao-toolbar").addClass("wc-pao-has-addons"),h(".wc-pao-toolbar .wc-pao-import-addons").show(),h(".wc-pao-toolbar .wc-pao-export-addons").show(),h(".wc-pao-addons").addClass("wc-pao-has-addons"),h("#product_addons_data").removeClass("onboarding"),h(".addon_fields_container").removeClass("pao_boarding__addons"),h(".pao_boarding__addons__message").hide()):(h(".wc-pao-toolbar").removeClass("wc-pao-has-addons"),h(".wc-pao-addons").removeClass("wc-pao-has-addons"),h(".wc-pao-toolbar .wc-pao-import-addons").hide(),h(".wc-pao-toolbar .wc-pao-export-addons").hide(),h("#product_addons_data").addClass("onboarding"),h(".addon_fields_container").addClass("pao_boarding__addons"),h(".pao_boarding__addons__message").show()),o.find('option[value="add"]').prop("selected","selected"),o.trigger("blur"),h(document.body).trigger("init_tooltips")},expandAllFields:function(){var a=h("#product_addons_data .wc-pao-addon");setTimeout(function(){a.removeClass("closed").addClass("open"),a.find(".wc-pao-addon-content").show()},50)},closeAllFields:function(){var a=h("#product_addons_data .wc-pao-addon");setTimeout(function(){a.removeClass("open").addClass("closed"),a.find(".wc-pao-addon-content").hide()},50)},addonRowIndexes:function(){h(".wc-pao-addons .wc-pao-addon").each(function(a,o){h(".wc-pao-addon-position",o).val(parseInt(h(o).index(".wc-pao-addons .wc-pao-addon")))})},runFieldSortable:function(){h(".wc-pao-addons").sortable({items:".wc-pao-addon",cursor:"move",axis:"y",handle:".wc-pao-addon-sort-handle",scrollSensitivity:40,helper:function(a,o){return o},start:function(a,o){o.item.css("border-style","dashed").css("border-color","orange")},stop:function(a,o){o.item.removeAttr("style"),t.addonRowIndexes()}})},updateDefaultOptions:function(a,o,d){var n=o.closest(".wc-pao-addon-option-row").index(),o=o.val();return!(n<0)&&""!==o.trim()&&void("change"===d?a.find(`option:eq(${n+1})`).length?a.find(`option:eq(${n+1})`).val(o).text(o):a.append(new Option(o,o)):"remove"===d&&a.find(`option[value="${o}"]`).remove())},runOptionSortable:function(){h(".wc-pao-addon-content-options-container").sortable({items:".wc-pao-addon-option-row",cursor:"move",axis:"y",handle:".wc-pao-addon-sort-handle",scrollSensitivity:40,helper:function(a,o){return o},start:function(a,o){o.item.css("border-style","dashed").css("border-width","1px").css("border-color","orange")},stop:function(a,o){o.item.removeAttr("style"),t.addonRowIndexes();const d=h(this),n=d.find(".wc-pao-addon-content-label input"),e=d.closest(".wc-pao-addon-content").find(".wc-pao-addon-default-option-setting select");e.length&&(o=e.val(),n.each(function(){t.updateDefaultOptions(e,h(this),"change")}),e.find(`option[value="${o}"]`).length)&&e.val(o),d.find("input.wc-pao-addon-option-default").each(function(a){var o=h(this).attr("name");o&&(o=o.replace(/\[0\]\[\d+\]/,`[0][${a}]`),h(this).attr("name",o))})}})},validateSettings:function(i="all"){h(".wc-pao-error-message").remove(),h(".updated").remove();var a,c=!0,r=!0,p=!1,l=!1,w=!1;return h(".wc-pao-addons").find(".wc-pao-addon").each(function(a){var o,d,n,e,s,t;"all"!==i&&"addon_title"!==i||(0===(o=h(this).find(".wc-pao-addon-content-name").val().length)?(h(this).addClass("wc-pao-error").find(".wc-pao-addon-content-name").addClass("wc-pao-error"),p=!(r=c=!1)):255<o?(h(this).addClass("wc-pao-error").find(".wc-pao-addon-content-name").addClass("wc-pao-error"),l=!(r=c=!1)):(h(this).removeClass("wc-pao-error").find(".wc-pao-addon-content-name").removeClass("wc-pao-error"),h(this).find(".wc-pao-addon-header .woocommerce-help-tip.addons-max-length-title").hide())),"all"!==i&&"addon_required"!==i||(o=h(this),"multiple_choice"!==(t=o.find(".product_addon_type").val())&&"checkbox"!==t)||(n=(d=o.find(".wc-pao-addon-required-setting input")).is(":checked"),e=o.find(".wc-pao-addon-option-row").length,s=o.find(".wc-pao-addon-option-row .wc-pao-addon-content-visibility button.is-hidden").length,n&&e===s?(d.addClass("wc-pao-error"),o.closest(".wc-pao-addon").addClass("wc-pao-error"),w=!(r=c=!1)):d.removeClass("wc-pao-error")),"all"!==i&&"addon_option_title"!==i||(t=h(this).find(".product_addon_type").val(),h(this).find(".wc-pao-addon-option-row").each(function(){"multiple_choice"!==t&&"checkbox"!==t||0!==h(this).find(".wc-pao-addon-content-label input").val().length?h(this).find(".wc-pao-addon-content-label input").removeClass("wc-pao-error"):(h(this).find(".wc-pao-addon-content-label input").addClass("wc-pao-error"),h(this).parents(".wc-pao-addon").eq(0).addClass("wc-pao-error"),p=!(r=c=!1))})),r&&h(this).removeClass("wc-pao-error")}),!1===c&&(p?a=h('<div class="notice notice-error wc-pao-error-message"><p>'+wc_pao_params.i18n.required_fields+"</p></div>"):l?a=h('<div class="notice notice-error wc-pao-error-message"><p>'+wc_pao_params.i18n.max_title_length_exceeded+"</p></div>"):w&&(a=h('<div class="notice notice-error wc-pao-error-message"><p>'+wc_pao_params.i18n.no_visible_options+"</p></div>")),h(".wc-pao-addons").before(a),h("html, body").animate({scrollTop:h(".wc-pao-error-message").offset().top-200},600)),c},render:function(a,o){var d;switch(o.find(".wc-pao-addon-main-settings-1 .wc-pao-col1").removeClass("full"),o.find(".wc-pao-addon-main-settings-1 .wc-pao-col2").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-image").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-label").addClass("full"),o.find(".wc-pao-addon-content-default").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-restrictions-select").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1-1").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1-2").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1").addClass("full"),o.find(".wc-pao-addon-content-option-rows").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-non-option-rows").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-required-setting").removeClass("hide").addClass("show"),a){case"multiple_choice":o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1-1").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col2").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1").removeClass("full"),o.find(".wc-pao-addon-content-option-rows").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-non-option-rows").removeClass("show").addClass("hide"),"images"===o.find(".wc-pao-addon-display-select").val()&&(o.find(".wc-pao-addon-content-image").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-label").removeClass("full"),o.find(".wc-pao-addon-content-option-header").text(wc_pao_params.i18n.options_header_with_image));break;case"checkbox":o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1-1").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1").addClass("full"),o.find(".wc-pao-addon-content-option-rows").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-non-option-rows").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-image").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-label").addClass("full"),o.find(".wc-pao-addon-adjust-price-container").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-restrictions-container").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-default").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-headers").addClass("checkboxes"),o.find(".wc-pao-addon-option-row").addClass("checkboxes");break;case"custom_price":d=wc_pao_params.i18n.limit_price_range,o.find(".wc-pao-addon-adjust-price-container").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-min-max").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1-1").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1").addClass("full"),o.find(".wc-pao-addon-content-option-rows").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-non-option-rows").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-restrictions-select").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-adjust-price-container").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-restrictions-container").removeClass("hide").addClass("show");break;case"input_multiplier":o.find(".wc-pao-addon-adjust-price-container").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-restrictions-container").removeClass("hide").addClass("show"),d=wc_pao_params.i18n.limit_quantity_range;break;case"custom_text":d=wc_pao_params.i18n.limit_character_length,o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1-2").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-restrictions-select").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-option-rows").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-non-option-rows").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-adjust-price-container").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-restrictions-container").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-min-max").removeClass("hide").addClass("show"),"email"===o.find(".wc-pao-addon-restrictions-select").val()&&o.find(".wc-pao-addon-min-max").removeClass("show").addClass("hide");break;case"custom_textarea":d=wc_pao_params.i18n.limit_character_length,o.find(".wc-pao-addon-min-max").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-adjust-price-container").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-restrictions-container").removeClass("hide").addClass("show");break;case"file_upload":o.find(".wc-pao-addon-adjust-price-container").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-restrictions-container").removeClass("show").addClass("hide");break;case"heading":o.find(".wc-pao-addon-required-setting").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-adjust-price-container").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-restrictions-container").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-main-settings-1 .wc-pao-col1").addClass("full"),o.find(".wc-pao-addon-main-settings-1 .wc-pao-col2").removeClass("show").addClass("hide");break;case"datepicker":o.find(".wc-pao-addon-restrictions-container").removeClass("show").addClass("hide");break;default:o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1-1").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1-2").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-main-settings-2 .wc-pao-col1").addClass("full"),o.find(".wc-pao-addon-content-option-rows").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-non-option-rows").removeClass("hide").addClass("show"),d=wc_pao_params.i18n.restrictions,o.find(".wc-pao-addon-restrictions-container").removeClass("show").addClass("hide")}o.find(".wc-pao-addon-restriction-name").html(d),t.update_remove_addon_option_buttons(o)},update_remove_addon_option_buttons:function(a){a=a.find(".wc-pao-remove-option");a.length<2?a.attr("disabled","disabled"):a.removeAttr("disabled")},delay:function(a,o){clearTimeout(0),setTimeout(a,o)},init:function(){var s=h("#product_addons_data"),a=h("<input>"),o=h("<input>");a.attr("type","hidden"),a.attr("name","pao_post_control_var"),a.val("1"),o.attr("type","hidden"),o.attr("name","pao_post_test_var"),o.val("1"),s.prepend(a),s.append(o),h(".post-type-product").on("click",'#publishing-action input[name="save"]',function(){return t.validateSettings("all")}),h(".product_page_addons").on("click",'input[type="submit"]',function(){return t.validateSettings("all")}),s.on("keyup",".wc-pao-addon-content-name",function(){var o=h(this);t.delay(function(){var a=o.val();o.closest(".wc-pao-addon").find(".wc-pao-addon-name").text(a)},300)}).on("blur",".wc-pao-addon-content-name",function(){t.validateSettings("addon_title")}).on("keyup",".wc-pao-addon-content-label input",function(){h(this).removeClass("wc-pao-error"),h(".wc-pao-error-message").remove()}).on("change","select.addon_field_type",function(){var n=h(".wc-pao-addons .wc-pao-addon").length,e=h(this),a=e.val(),o=t.getBlockParams();return s.block(o),setTimeout(function(){h.when(t.getAddonField(a)).then(function(a){a=(a=(a=a.html).replace(/{loop}/g,n)).replace(/closed/g,"open"),h(".wc-pao-addons").append(a);var a=h(".wc-pao-addons .wc-pao-addon").last(),o=e.val(),d=e.find('option[value="'+o+'"]').text(),d=(a.find(".product_addon_type").val(o),a.find(".wc-pao-addon-header .wc-pao-addon-type").html(d),t.render(o,a),t.refresh(),t.runOptionSortable(),h("select#product-type").val());h(".hide_if_"+d).hide(),h(".show_if_"+d).show(),s.unblock()})},250),!1}).on("change",".wc-pao-addon-display-select",function(){var a=h(this).val(),o=h(this).parents(".wc-pao-addon");"images"===a?(o.find(".wc-pao-addon-content-image").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-label").removeClass("full"),o.find(".wc-pao-addon-content-option-header").text(wc_pao_params.i18n.options_header_with_image)):(o.find(".wc-pao-addon-content-image").removeClass("show").addClass("hide"),o.find(".wc-pao-addon-content-label").addClass("full"),o.find(".wc-pao-addon-content-option-header").text(wc_pao_params.i18n.options_header_default))}).on("click","button.wc-pao-add-option",function(){var o=h(this).closest(".wc-pao-addon"),d=o.find(".wc-pao-addon-content-name").attr("name").replace(/product_addon_name\[([0-9]*)\]/i,"$1"),n=h(this).parents(".wc-pao-addon-content-option-rows").find(".wc-pao-addon-content-options-container"),e=n.find(".wc-pao-addon-option-row").length;return h.when(t.getAddonOptions()).then(function(a){a=(a=(a=a.html).replace(/{loop}/g,d)).replace(/{index}/g,e),h(a).appendTo(n),"images"===o.find(".wc-pao-addon-display-select").val()&&(o.find(".wc-pao-addon-content-image").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-label").removeClass("full"),o.find(".wc-pao-addon-content-option-header").text(wc_pao_params.i18n.options_header_with_image)),"checkbox"===o.find(".product_addon_type").val()&&(o.find(".wc-pao-addon-content-default").removeClass("hide").addClass("show"),o.find(".wc-pao-addon-content-headers").addClass("checkboxes"),o.find(".wc-pao-addon-option-row").addClass("checkboxes")),t.update_remove_addon_option_buttons(o)}),!1}).on("click","a.wc-pao-remove-addon",function(a){return a.preventDefault(),h(this).closest(".wc-pao-addon").off(),h(".wc-pao-error-message").remove(),confirm(wc_pao_params.i18n.confirm_remove_addon)&&(a=h(this).closest(".wc-pao-addon"),h(a).find("input").val(""),h(a).remove()),h(".wc-pao-addons .wc-pao-addon").each(function(a,o){var d=a;h(this).find(".product_addon_position").val(d),h(this).find("select, input, textarea").prop("name",function(a,o){return o.replace(/\[([0-9]+)\]/,"["+d+"]")})}),t.refresh(),!1}).on("click",".wc-pao-remove-option",function(){var a,o=h(this),d=o.attr("disabled");return void 0!==d&&!1!==d||confirm(wc_pao_params.i18n.confirm_remove_option)&&(d=o.parents(".wc-pao-addon"),(a=o.closest(".wc-pao-addon-content").find(".wc-pao-addon-default-option-setting select")).length&&t.updateDefaultOptions(a,o.closest(".wc-pao-addon-option-row").find(".wc-pao-addon-content-label input"),"remove"),o.parents(".wc-pao-addon-option-row").remove(),(a=d.find(".wc-pao-remove-option")).length<2?a.attr("disabled","disabled"):a.removeAttr("disabled")),!1}).on("click",".wc-pao-addon-content-visibility",function(){var a=h(this),o=a.find("button"),d=a.find("input"),d=(o.hasClass("is-hidden")?(o.removeClass("is-hidden"),o.attr("aria-pressed",!1),o.attr("aria-label",wc_pao_params.i18n.options_hide_option),d.attr("checked",!0)):(o.addClass("is-hidden"),o.attr("aria-pressed",!0),o.attr("aria-label",wc_pao_params.i18n.options_show_option),d.attr("checked",!1)),t.validateSettings("addon_required"),o.hasClass("is-hidden")?wc_pao_params.i18n.options_show_option:wc_pao_params.i18n.options_hide_option);a.attr("title",d),a.tipTip("hide").tipTip("show")}).on("click",".wc-pao-addon-required-setting",function(){t.validateSettings("addon_required")}).on("click",".wc-pao-expand-all",function(a){a.preventDefault(),t.expandAllFields()}).on("click",".wc-pao-close-all",function(a){a.preventDefault(),t.closeAllFields()}).on("click",".wc-pao-addon-description-enable",function(){h(this).is(":checked")?h(this).parents(".wc-pao-addons-secondary-settings").find(".wc-pao-addon-description").removeClass("hide").addClass("show"):h(this).parents(".wc-pao-addons-secondary-settings").find(".wc-pao-addon-description").removeClass("show").addClass("hide")}).on("click",".wc-pao-addon-placeholder-enable",function(){h(this).is(":checked")?h(this).parents(".wc-pao-addons-secondary-settings").find(".wc-pao-addon-placeholder").removeClass("hide").addClass("show"):h(this).parents(".wc-pao-addons-secondary-settings").find(".wc-pao-addon-placeholder").removeClass("show").addClass("hide")}).on("change",".wc-pao-addon-option-price-type",function(){switch(h(this).val()){case"flat_fee":case"quantity_based":h(this).parents(".wc-pao-addon-content-price-type").removeClass("full").next(".wc-pao-addon-content-price").eq(0).removeClass("hide").addClass("show")}}).on("click",".wc-pao-addon-add-image",function(){var d=h(this).parent(),a=wp.media.frames.mediaFrame=wp.media({title:wc_pao_params.i18n.add_image_swatch,button:{text:wc_pao_params.i18n.add_image},library:{type:"image"},multiple:!1});a.on("select",function(){a.state().get("selection").map(function(a){var o;(a=a.toJSON()).id&&(o=(a.sizes.thumbnail||a).url,d.find(".wc-pao-addon-option-image-id").val(a.id),d.find(".wc-pao-addon-image-swatch img").prop("src",o),d.find(".wc-pao-addon-image-swatch").removeClass("hide").addClass("show"),d.find(".wc-pao-addon-add-image").removeClass("show").addClass("hide"),d.find(".dashicons-plus").removeClass("show").addClass("hide"))})}),a.open()}).on("click",".wc-pao-addon-image-swatch",function(a){a.preventDefault();a=h(this).parent();a.find(".wc-pao-addon-option-image-id").val(""),a.find(".wc-pao-addon-image-swatch img").prop("src",""),a.find(".wc-pao-addon-image-swatch").removeClass("show").addClass("hide"),a.find(".wc-pao-addon-add-image").removeClass("hide").addClass("show"),a.find(".dashicons-plus").removeClass("hide").addClass("show")}).on("click",".wc-pao-addon-restrictions",function(){h(this).is(":checked")?h(this).parents(".wc-pao-addon-restrictions-container").find(".wc-pao-addon-restrictions-settings").removeClass("hide").addClass("show"):h(this).parents(".wc-pao-addon-restrictions-container").find(".wc-pao-addon-restrictions-settings").removeClass("show").addClass("hide")}).on("change",".wc-pao-addon-restrictions-select",function(){var a=h(this).val(),o=h(this).parents(".wc-pao-addon-restrictions-settings");"email"===a?o.find(".wc-pao-addon-min-max").removeClass("show").addClass("hide"):o.find(".wc-pao-addon-min-max").removeClass("hide").addClass("show")}).on("click",".wc-pao-addon-id",function(){return!1}).on("click",".wc-pao-addon-adjust-price",function(){h(this).is(":checked")?h(this).parents(".wc-pao-addon-adjust-price-container").find(".wc-pao-addon-adjust-price-settings").removeClass("hide").addClass("show"):h(this).parents(".wc-pao-addon-adjust-price-container").find(".wc-pao-addon-adjust-price-settings").removeClass("show").addClass("hide")}).on("change",".wc-pao-addon-content-options-container .wc-pao-addon-content-label input",function(a){var o=h(this).closest(".wc-pao-addon-content").find(".wc-pao-addon-default-option-setting select");o.length&&t.updateDefaultOptions(o,h(this),"change")}),s.find(".wc-pao-addon").each(function(){var a=h(this).find(".product_addon_type").val();t.render(a,h(this))}),t.refresh(),s.on("click",".wc-pao-export-addons",function(){var a=s.find(".product_addons_export_string").val(),o=h("<input>");return h("body").append(o),o.val(a).select(),document.execCommand("copy"),o.remove(),alert(wc_pao_params.i18n.addons_exported),!1}),s.on("click",".wc-pao-import-addons",function(a){a.preventDefault(),h(this).trigger("blur");var o,a=window.prompt(wc_pao_params.i18n.import_addons_prompt);if(!a)return!1;var d="undefined"!=typeof woocommerce_admin_meta_boxes&&woocommerce_admin_meta_boxes.post_id?(o=woocommerce_admin_meta_boxes.post_id,!1):(o=(o=(d=new URLSearchParams(window.location.search)).get("edit"))||d.get("add"),!0),a={security:wc_pao_params.nonce.import_addons,action:"wc_pao_import_addons",import_product_addon:a,post_id:o,is_global:d};h.post(wc_pao_params.ajax_url,a,function(a){var n,o;a.success&&!0===a.success?(n=h("select#product-type").val(),o=t.getBlockParams(),s.block(o),alert(a.data.message),setTimeout(function(){h.each(a.data.addons,function(a,o){var d=o.type;h.when(t.getAddonField(d,o)).then(function(a){var a=a.html,o=h(".wc-pao-addons .wc-pao-addon").length,o=(a=a.replace(/{loop}/g,o),h(".wc-pao-addons").append(a),h(".wc-pao-addons .wc-pao-addon").last()),a=h("select.addon_field_type").find('option[value="'+d+'"]').text();o.find(".product_addon_type").val(d),o.find(".wc-pao-addon-header .wc-pao-addon-type").html(a),t.render(d,o),t.refresh(),t.runOptionSortable(),h(".hide_if_"+n).hide(),h(".show_if_"+n).show()})}),s.unblock(o),setTimeout(function(){var a=h(".wc-pao-addon-header:last");h("html, body").animate({scrollTop:a.offset().top-200},1e3)},1e3)},1e3)):a.data.message.length&&alert(a.data.message)})}),t.runFieldSortable(),t.runOptionSortable(),h(".global-addons-form .wc-pao-addon").each(function(){h(this).hasClass("closed")&&h(this).find(".wc-pao-addon-content").hide()}),h(".global-addons-form .wc-pao-addon-header").on("click",function(){var a=h(this).closest(".wc-pao-addon"),o=a.find(".wc-pao-addon-content");setTimeout(function(){a.toggleClass("closed").toggleClass("open"),o.stop().slideToggle()},50)}),h("#addons-table #doaction").on("click",function(a){if("delete"===h("#bulk-action-selector-top").val()&&!window.confirm(wc_pao_params.i18n.delete_addons_warning))return a.preventDefault(),!1}),h("#addons-table #doaction2").on("click",function(a){if("delete"===h("#bulk-action-selector-bottom").val()&&!window.confirm(wc_pao_params.i18n.delete_addons_warning))return a.preventDefault(),!1}),1<h(".wc-pao-addons .wc-pao-addon").length&&h(".wc-pao-toolbar").show(),h(".wc-pao-addon-content-visibility button").each(function(){var a=h(this);a.tipTip({defaultPosition:"top",delay:50,content:function(){return a.hasClass("is-hidden")?wc_pao_params.i18n.options_show_option:wc_pao_params.i18n.options_hide_option}})}),h('[name*="addon_wc_booking_person_qty_multiplier"]').on("change",function(){var a=h(this).attr("name"),o=h(this).is(":checked");h('[name*="'+a+'"]').prop("checked",o)})}};t.init()});