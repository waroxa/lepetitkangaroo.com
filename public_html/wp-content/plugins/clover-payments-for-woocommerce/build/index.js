(()=>{"use strict";var e={20:(e,n,s)=>{var r=s(609),t=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,s){var r,c={},i=null,d=null;for(r in void 0!==s&&(i=""+s),void 0!==n.key&&(i=""+n.key),void 0!==n.ref&&(d=n.ref),n)a.call(n,r)&&!l.hasOwnProperty(r)&&(c[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===c[r]&&(c[r]=n[r]);return{$$typeof:t,type:e,key:i,ref:d,props:c,_owner:o.current}}n.jsx=c,n.jsxs=c},848:(e,n,s)=>{e.exports=s(20)},609:e=>{e.exports=window.React}},n={};const s=window.wc.wcBlocksRegistry,r=window.wp.i18n,t=window.wc.wcSettings,a=window.wp.element;var o=function s(r){var t=n[r];if(void 0!==t)return t.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,s),a.exports}(848);const l=(0,a.createContext)(null),c=()=>(0,a.useContext)(l),i=({merchantSettings:e,children:n})=>{const{merchantId:s,publicKey:r,locale:t}=e,[c,i]=(0,a.useState)(null),d=(0,a.useMemo)((()=>c?.elements()),[c]);(0,a.useEffect)((()=>{i((e=>null!=e?e:new Clover(r,{merchantId:s,locale:t})))}),[]);const p={cloverInstance:c,cloverElementsInstance:d,locale:t};return(0,o.jsx)(l.Provider,{value:p,children:n})},d={html:{display:"inline !important"},".hydrated":{display:"block",height:"46px",overflow:"hidden"},input:{fontFamily:"Graphik, Helvetica, sans-serif",color:"#000000",backgroundColor:"transparent",boxShadow:"none",fontSize:"16px",height:"46px",width:"100%",padding:"11px 18px 11px 18px"},".brand":{right:"8px",top:"8px"}},p=(0,a.memo)((({cloverElementsInstance:e,fieldName:n,handleValidationOnChange:s,handleValidationOnBlur:r,handleValidationOnFocus:t,...l})=>{const c=n.toLocaleLowerCase(),i=e=>{s(e,n)},p=e=>{r(e,n)},m=()=>{t(n)};return(0,a.useEffect)((()=>{const s=e.create(n,d);return s.mount(`#${c}`),s.addEventListener("change",i),s.addEventListener("blur",p),s.addEventListener("focus",m),()=>{s.removeEventListener("change",i),s.removeEventListener("blur",p),s.removeEventListener("focus",m)}}),[]),(0,o.jsx)("div",{id:c,...l})})),m=({...e})=>(0,o.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-testid":"error-svg",role:"img",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.78126 3.91278C5.4248 2.24389 7.65857 1.28806 10.0006 1.25152C11.1428 1.22919 12.278 1.43515 13.3396 1.85733C14.4011 2.27951 15.3677 2.9094 16.1826 3.71006C16.9976 4.51072 17.6444 5.46604 18.0853 6.51999C18.5261 7.57395 18.7521 8.70532 18.7499 9.84775C18.7694 12.1883 17.8587 14.4407 16.218 16.1101C14.5774 17.7794 12.3411 18.729 10.0006 18.7502H9.85477C8.72501 18.7521 7.60598 18.5311 6.56176 18.0999C5.51754 17.6687 4.56866 17.0357 3.76946 16.2372C2.97026 15.4386 2.33645 14.4903 1.90433 13.4464C1.47222 12.4026 1.25028 11.2837 1.25124 10.154C1.23365 8.99728 1.44853 7.84882 1.88313 6.77672C2.31773 5.70463 2.9632 4.73073 3.78126 3.91278ZM9.27168 10.3945V6.0198C9.27168 5.82643 9.34849 5.64098 9.48523 5.50424C9.62196 5.36751 9.80741 5.29069 10.0008 5.29069C10.1942 5.29069 10.3796 5.36751 10.5163 5.50424C10.6531 5.64098 10.7299 5.82643 10.7299 6.0198V10.3945C10.7299 10.5879 10.6531 10.7733 10.5163 10.91C10.3796 11.0468 10.1942 11.1236 10.0008 11.1236C9.80741 11.1236 9.62196 11.0468 9.48523 10.91C9.34849 10.7733 9.27168 10.5879 9.27168 10.3945ZM8.90712 13.3109C8.90116 13.1643 8.92515 13.0181 8.97762 12.8811C9.03009 12.7441 9.10995 12.6192 9.21231 12.5141C9.31467 12.4091 9.43739 12.3259 9.57296 12.2699C9.70852 12.2138 9.8541 12.186 10.0008 12.1881C10.288 12.1898 10.5634 12.3021 10.7699 12.5017C10.9763 12.7014 11.0978 12.9729 11.109 13.2599C11.1149 13.4043 11.0916 13.5484 11.0404 13.6835C10.9891 13.8186 10.9111 13.942 10.811 14.0462C10.7109 14.1504 10.5907 14.2333 10.4578 14.2899C10.3248 14.3464 10.1818 14.3756 10.0372 14.3754C9.74751 14.3795 9.46755 14.2707 9.25662 14.072C9.04569 13.8734 8.92035 13.6004 8.90712 13.3109Z"})}),u=({error:e})=>(0,o.jsx)("div",{"aria-live":"polite",role:"alert",className:"agpQQ94cth8DeVkW1wxp",children:(0,o.jsxs)("p",{className:"miwW2RjrD2wQhYcY9_wg",children:[(0,o.jsx)(m,{className:"ilWHDvMquqb_X8LUTY_E"}),e]})}),h="u6QuLRhpfuXlvKzc2vCi",C="CARD_NAME",x="CARD_NUMBER",v="CARD_DATE",E="CARD_CVV",g="CARD_POSTAL_CODE",y={renderError:!1,errorMessage:"",focused:!1},R=()=>{const{cloverElementsInstance:e,cloverInstance:n}=c(),[s,r]=(0,a.useState)({CARD_NAME:y,CARD_NUMBER:y,CARD_DATE:y,CARD_CVV:y,CARD_POSTAL_CODE:y}),t=(0,a.useCallback)(((e,n)=>{r((e=>({...e,[n]:{...e[n],renderError:!1}})))}),[]),l=(0,a.useCallback)(((e,n)=>{r((s=>({...s,[n]:{...s[n],renderError:e[n].touched&&!!e[n].error,errorMessage:e[n].error,focused:!1}})))}),[]),i=(0,a.useCallback)((e=>{r((n=>({...n,[e]:{...n[e],focused:!0}})))}),[]),d=e=>s[e].focused?"uXaSVn_4TmtLBFuKnUYg":s[e].renderError?"cced4Wcl8Utq3l7r_dsC":"xgIOYaOZMHnhZnHho3qT";return e&&n?(0,o.jsxs)("div",{className:"cardElementsContainer",children:[(0,o.jsxs)("div",{className:h,children:[(0,o.jsx)(p,{cloverElementsInstance:e,fieldName:C,handleValidationOnChange:t,handleValidationOnBlur:l,handleValidationOnFocus:i,className:d(C)}),s[C].renderError&&(0,o.jsx)(u,{error:s[C].errorMessage})]}),(0,o.jsxs)("div",{className:h,children:[(0,o.jsx)(p,{cloverElementsInstance:e,fieldName:x,handleValidationOnChange:t,handleValidationOnBlur:l,handleValidationOnFocus:i,className:d(x)}),s[x].renderError&&(0,o.jsx)(u,{error:s[x].errorMessage})]}),(0,o.jsxs)("div",{className:"BTbKwKVhuYtryF4wuuEj",children:[(0,o.jsxs)("div",{className:"pC9ok0y1jzgcjG_7r0VW",children:[(0,o.jsx)(p,{cloverElementsInstance:e,fieldName:v,handleValidationOnChange:t,handleValidationOnBlur:l,handleValidationOnFocus:i,className:d(v)}),s[v].renderError&&(0,o.jsx)(u,{error:s[v].errorMessage})]}),(0,o.jsxs)("div",{className:"qDcjvnznQ_6cXi3ZNdIQ",children:[(0,o.jsx)(p,{cloverElementsInstance:e,fieldName:E,handleValidationOnChange:t,handleValidationOnBlur:l,handleValidationOnFocus:i,className:d(E)}),s[E].renderError&&(0,o.jsx)(u,{error:s[E].errorMessage})]})]}),(0,o.jsx)("div",{className:"H5OrQl_9_mgEXwhqKeZU",children:(0,o.jsxs)("div",{className:"bpAmv2uEFrrekjaht95v",children:[(0,o.jsx)("div",{className:"Ropw3_GmEQ2QYAsiXnXy",children:(0,o.jsx)(p,{cloverElementsInstance:e,fieldName:g,handleValidationOnChange:t,handleValidationOnBlur:l,handleValidationOnFocus:i,className:d(g)})}),s[g].renderError&&(0,o.jsx)(u,{error:s[g].errorMessage})]})})]}):null},f=({eventRegistration:e,emitResponse:n})=>{const{onPaymentSetup:s,onCheckoutSuccess:t,onCheckoutFail:o}=e,{cloverInstance:l,locale:i}=c();if(!l)return null;((e,n,s)=>{const{responseTypes:t,noticeContexts:o}=n;(0,a.useEffect)((()=>{const n=e((async()=>{try{const e=await s.createToken();return console.log("Tokenization Response: ",e),e?.errors?{type:t.ERROR,message:Object.values(e.errors)[0],messageContext:o.PAYMENTS}:e?.token?{type:t.SUCCESS,meta:{paymentMethodData:{clover_token:e.token}}}:{type:t.ERROR,message:(0,r.__)("(0002) Transaction could not be processed. Please contact support.","woo-clv-payments"),messageContext:o.PAYMENTS}}catch(e){return console.error("Payment token could not be created.",e),{type:t.ERROR,message:(0,r.__)("(0001) Transaction could not be processed. Please contact support.","woo-clv-payments"),messageContext:o.PAYMENTS}}}));return()=>n()}),[e,n.responseTypes.ERROR,n.responseTypes.SUCCESS])})(s,n,l),((e,n)=>{(0,a.useEffect)((()=>{const s=e((e=>{const{redirectUrl:s,processingResponse:r}=e,{paymentDetails:t}=r,{noticeContexts:a,responseTypes:o}=n;return"success"===t?.result?{type:o.SUCCESS,redirectUrl:s}:"failed"===t?.result?(t?.exceptionMessage&&console.error("Exception thrown",t.exceptionMessage),{type:o.FAIL,message:t?.message,messageContext:a.PAYMENTS,retry:!0}):{type:o.ERROR,retry:!0}}));return()=>s()}),[e,n.responseTypes.SUCCESS,n.responseTypes.FAIL,n.responseTypes.ERROR,n.noticeContexts.PAYMENTS])})(t,n),((e,n)=>{(0,a.useEffect)((()=>{const s=e((e=>{const{processingResponse:s}=e,{paymentDetails:r}=s,{noticeContexts:t,responseTypes:a}=n;return"failed"===r?.result?(r?.exceptionMessage&&console.error("Exception thrown",r.exceptionMessage),{type:a.FAIL,message:r?.message,messageContext:t.PAYMENTS,retry:!0}):{type:a.ERROR,retry:!0}}));return()=>s()}),[e,n.responseTypes.FAIL,n.responseTypes.ERROR,n.noticeContexts.PAYMENTS])})(o,n)},_=(0,t.getSetting)("clover_payments_data",{}),j=({merchantSettings:e,...n})=>(0,o.jsxs)(i,{merchantSettings:e,children:[(0,o.jsx)("div",{className:"RAGzBSYy0cv5Y6vF4NCX",children:(0,o.jsx)("form",{id:"cardForm",children:(0,o.jsx)(R,{})})}),(0,o.jsx)(f,{...n})]}),w=({merchantSettings:e,components:n})=>{const{title:s}=e,{PaymentMethodLabel:r,PaymentMethodIcons:t}=n;return(0,o.jsxs)("div",{className:"j6Em0vXirA5QJqQjtqEg",children:[(0,o.jsx)(r,{text:s}),(0,o.jsx)(t,{icons:["visa","mastercard","amex","discover"]})]})},S={name:"clover_payments",edit:(0,o.jsx)(j,{merchantSettings:_}),content:(0,o.jsx)(j,{merchantSettings:_}),canMakePayment:()=>!0,gatewayId:"clover_payments",paymentMethodId:"clover_payments",ariaLabel:(0,r.__)("Clover Card Payment Method","woo-clv-payments"),label:(0,o.jsx)(w,{merchantSettings:_})};(0,s.registerPaymentMethod)(S)})();