(()=>{"use strict";window.jQuery,jQuery((function(e){e("body").on("change",'[id^="_wc_deposit_override_product_settings_"]',(function(){const t=e(this).closest(".wc-deposits-product-settings-override").next(".wc-deposits-product-settings-override-container"),s=e(this).is(":checked");t.toggleClass("visible",s),t.toggleClass("hidden",!s)})),e("body").on("change","select._wc_deposit_enabled",(function(){const t=e(this).closest(".options_group"),s=e(this).val(),i=e(this).attr("data-default-value");t.parent().data("type"),t.find("._wc_deposit_payment_plans_field").hide(),t.find("._wc_deposit_amount_field").hide(),t.find("._wc_deposit_multiple_cost_by_booking_persons_field").hide(),t.find("._wc_deposit_type_field").hide(),"optional"!==s&&"forced"!==s||(t.find("._wc_deposit_type_field").show(),t.find("select._wc_deposit_type").trigger("change")),""===s&&"no"!==t.find("._wc_deposits_default_enabled_field").val()&&(t.find("._wc_deposit_type_field").show(),t.find("select._wc_deposit_type").trigger("change")),"optional"===s||!s&&"optional"===i?t.find("._wc_deposit_selected_type_field").show():t.find("._wc_deposit_selected_type_field").hide()})),e("body").on("change","select._wc_deposit_type",(function(){const t=e(this).closest(".options_group"),s=e(this).val();switch(t.find("._wc_deposit_payment_plans_field").hide(),t.find("._wc_deposit_amount_field").hide(),t.find("._wc_deposit_multiple_cost_by_booking_persons_field").hide(),s){case"percent":t.find("._wc_deposit_amount").attr("placeholder",e("._wc_deposits_default_amount_field").val()),t.find("._wc_deposit_amount_field").show();break;case"fixed":t.find("._wc_deposit_amount_field").show(),t.find("._wc_deposit_amount").attr("placeholder","0");break;case"plan":t.find("._wc_deposit_payment_plans_field").show();break;default:switch(t.find("._wc_deposits_default_type_field").val()){case"plan":t.find("._wc_deposit_payment_plans_field").show();break;case"percent":t.find("._wc_deposit_amount").attr("placeholder",e("._wc_deposits_default_amount_field").val()),t.find("._wc_deposit_amount_field").show();break;case"fixed":t.find("._wc_deposit_amount_field").show(),t.find("._wc_deposit_amount").attr("placeholder","0")}}"fixed"===s&&"booking"===e("#product-type").val()&&t.find("._wc_deposit_multiple_cost_by_booking_persons_field").show()})),e(document.body).on("change","select#wc_deposits_default_type",(function(){switch(e("#wc_deposits_default_plans").parents("tr").eq(0).hide(),e("#wc_deposits_default_amount").parents("tr").eq(0).hide(),e(this).val()){case"percent":case"fixed":e("#wc_deposits_default_amount").parents("tr").eq(0).show();break;case"plan":e("#wc_deposits_default_plans").parents("tr").eq(0).show()}})),e(document.body).on("change","select._wc_deposit_selected_type",(function(){var t=e(this).val();e(this).closest(".options_group").find("._wc_deposits_default_selected_type_field").val(t)}));const t=function(){const t=e(".woocommerce_variation_deposits ._wc_deposit_payment_plans_field .description em"),s=e("#deposits ._wc_deposit_payment_plans");if(!s.length)return;const i=s.val(),o=e("#_wc_deposit_type");let _=e("#deposits ._wc_deposit_payment_plans_field .description em").text();"plan"===o.val()&&i.length&&(_=i.map((function(e){return s.find(`option[value=${e}]`).text()})).join(",")),t.text(_)},s=function(){e("select._wc_deposit_type").trigger("change"),e("select._wc_deposit_enabled").trigger("change"),e("select._wc_deposit_selected_type").trigger("change"),e("select.wc_deposits_default_type").trigger("change"),e("._wc_deposit_payment_plans, #wc_deposits_default_plans").each((function(){const s=e(this),o=s.data("plans-order").toString();if(o.indexOf(",")>0){const t=o.split(",");e.each(t,(function(e,t){const o=s.find("[value="+t+"]");i(s,o)}))}s.on("select2:select",(function(e){var t=e.params.data.element;i(s,t)})),s.is("#_wc_deposit_payment_plans")&&s.on("change",(function(){t()})),s.selectWoo({sorter:function(e){return e.sort((function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}))}})})),t()};function i(t,s){var i=e(s);i.detach(),t.append(i),t.trigger("change")}function o(){var t=e(".deposits-behavior-select").val(),s=e(".deposits-payment-option").closest("tr"),i=e(".deposits-calculation-method").closest("tr"),o=e(".deposits-amount").closest("tr"),_=e(".deposits-payment-plan").closest("tr"),d=e(".deposits-payment-gateways").closest("tr"),n=e(".deposits-order-again").closest("tr");s.hide(),i.hide(),o.hide(),_.hide(),d.hide(),n.hide(),"no"!==t&&(i.show(),d.show(),n.show(),"optional"===t&&s.show(),"plan"===e(".deposits-calculation-method").val()?(_.show(),o.hide()):(o.show(),_.hide()))}s(),e(document).on("woocommerce_variations_loaded",s),e("#_wc_deposit_type").on("change",t),e("select#wc_deposits_default_type").trigger("change"),o(),e("body").on("change",".deposits-behavior-select",o),e("body").on("change",".deposits-calculation-method",o)}))})();