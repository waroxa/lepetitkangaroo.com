(()=>{"use strict";const e=window.React,o=window.wp.plugins,t=window.wc.wcBlocksRegistry,s=window.wc.blocksCheckout,c=window.wp.i18n,r=window.wc.wcSettings,n=window.wc.priceFormat,i=({extensions:o})=>{if(void 0===o["woocommerce-deposits"])return null;const{has_deposit:t,future_payment_amount:i}=o["woocommerce-deposits"];if(!t||i<=0)return null;const m=(0,r.getSetting)("taxesEnabled",!0)&&(0,r.getSetting)("displayCartPricesIncludingTax",!1),a=(0,n.getCurrency)();return(0,e.createElement)(s.TotalsWrapper,null,(0,e.createElement)(s.TotalsItem,{className:"wc-block-components-totals-item wc-block-components-totals-footer-item",currency:a,value:i,label:(0,c.__)("Future payments","woocommerce-deposits"),description:m?(0,c.__)("Including taxes","woocommerce-deposits"):null}))},m=({extensions:o})=>{if(void 0===o["woocommerce-deposits"])return null;const{has_deposit:t,deferred_discount_amount:r,deferred_discount_tax:i}=o["woocommerce-deposits"];if(!t||r<=0)return null;const m=(0,n.getCurrency)();return(0,e.createElement)(s.TotalsWrapper,null,(0,e.createElement)(s.TotalsItem,{className:"wc-block-components-totals-item wc-block-components-totals-discount wc-block-components-totals-footer-item",currency:m,value:-r-i,label:(0,c.__)("Discount","woocommerce-deposits"),description:(0,c.__)("Applied toward future payments","woocommerce-deposits")}))};(0,t.registerPaymentMethodExtensionCallbacks)("woocommerce-deposits",(()=>{const{disabledGateways:e}=(()=>{const{disabled_gateways:e}=(0,r.getSetting)("woocommerce-deposits_data");return{disabledGateways:e}})(),o={};if(!e.length)return o;for(const[t,s]of Object.entries(e))o[s]=e=>{const o=e.cart.extensions["woocommerce-deposits"]?.has_deposit;return!o};return o})()),(0,o.registerPlugin)("woocommerce-deposits",{render:()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.ExperimentalOrderMeta,null,(0,e.createElement)(m,null),(0,e.createElement)(i,null))),scope:"woocommerce-checkout"}),(0,s.__experimentalRegisterCheckoutFilters)("woocommerce-deposits",{totalLabel:(e,o)=>{if(void 0===o["woocommerce-deposits"])return e;const{has_deposit:t}=o["woocommerce-deposits"];return t?(0,c.__)("Due today","woocommerce-deposits"):e},cartItemClass:(e,o,t)=>{if(void 0===o["woocommerce-deposits"])return e;const{is_deposit:s}=o["woocommerce-deposits"];return s&&(e+=" is-deposit"),e},cartItemPrice:(e,o,{context:t})=>{if(void 0===o["woocommerce-deposits"])return e;const{is_deposit:s}=o["woocommerce-deposits"];return s?"cart"===t?sprintf(/* translators: %s is the deposit amount to pay immediately (ie: $10). */ /* translators: %s is the deposit amount to pay immediately (ie: $10). */
(0,c.__)("Due today %s","woocommerce-deposits"),e):sprintf(/* translators: %s is the deposit amount to pay immediately (ie: $10). */ /* translators: %s is the deposit amount to pay immediately (ie: $10). */
(0,c.__)("%s due today","woocommerce-deposits"),e):e}})})();